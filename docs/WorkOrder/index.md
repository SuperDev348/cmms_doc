# Create WorkOrder

This object is used to represent work orders. A work order is a set of maintenance tasks that have to be executed by some assigned users on a given asset. 

Create an WorkOrder if  WorkOrder does not already exist.

**URL** : `/api/workorder`

**Method** : `POST`

**Auth required** : `YES`

**Header** : `Authorization:{jwt-token}`

| Param       | Type     | Description     | 
| :------------- |  :----------- |----------- |
|  intPriorityID |  Integer    | The ID of the priority level of the task. For getting possible values, please refer to the Priority section.|
|  intWorkOrderStatusID |  Integer    | The ID of the current status of the work order. For possible values, please refer to the WorkOrderStatus section.|
|  intSiteID |  Integer    | For multi-sites tenants, the ID of the site the work order is related to. A site is an asset itself, so for possible values, please refer to the Asset section.|
|  intRequestedByUserID |  Integer    | The ID of the user who requested the work order. For getting possible values, please refer to the User section.|
|  strEmailUserGuest |  String    | Work orders can be requested by guests without having to log into the CMMS. In this case, this field gives the email address of the person who submitted the work order.|
|  dtmDateCreated |  timestamp    | The date and time when the work order was created.|
|  dtmDateCompleted |  timestamp    | The date and time when the work order was completed.|
|  intCompletedByUserID |  Integer    |The ID of the user who requested the work order.|
|  strDescription |  String    |A short text describing the work order.|
|  strNameUserGuest |  String    |Work orders can be requested by guests without having to log into the CMMS. In this case, this field gives the name of the person who submitted the work order.|
|  dtmSuggestedCompletionDate |  timestamp    |The date and time when the work order should be completed.|
|  strPhoneUserGuest |  String    |Work orders can be requested by guests without having to log into the CMMS. In this case, this field gives the phone number of the person who submitted the work order.|
|  strCode |  String    |An unique code for referencing the work order. Work order codes are automatically generated by the CMMS. For example : `"2009-02-05.0004.00004"`.|
|  strCompletionNotes |  String    |This field can be used to input some notes upon the completion of the work order.|
|  intMaintenanceTypeID |  Integer    |An ID referring to the maintenance type of the work order.|
|  dtmDateLastModified |  timestamp    |The date and time when the work order was modified for the last time.|
|  strAdminNotes |  String    |This field can be used by the administrator to input some notes upon the completion of the work order.|
|  intRCAActionID |  Integer    |For Enterprise tenants only. An ID that indicates the action/solution for a problem code. Problems, causes, and actions must be configured in the tenant to use this field.|
|  intRCACauseID |  Integer    |For Enterprise tenants only. An ID that indicates the root cause for a problem code. Problems, causes, and actions must be configured in the tenant to use this field.|
|  intRCAProblemID |  Integer    |For Enterprise tenants only. An ID that indicates the root cause for a problem code on a specific asset or asset category. Problems, causes, and actions must be configured in the tenant to use this field.|

* Data example 

```json
{
    "intPriorityID": 4156,
    "intSiteID": 9,
    "strCode": "2009-02-05.0004.00004",
    "strCompletionNotes": "strCompletionNotes",
    "intRCACauseID": 4
    ... ...
}
```
** Success Response: **

**Code** : `200 success`

* Resonse example 

```json
{
   "msg": "WorkOrder added successfully!",
    "data": {id: "4rt8a89c24753232419483c"}
    }
```

** Error Responses: **

**Code** : `401 Unauthorized`

**Condition** : Missing or incorrect authentication credentials and expired one.

* Resonse example 

```json
{
    "msg": "JWT token varified failed!",
    "data":null
}
```

```json
{
    "msg": "JWT token expired!",
    "data":null
}
```

**Condition** : If fields are missed or put the wrong type of value.

**Code** : `400 BAD REQUEST`

* Content example 

```json
{
    "msg": "intWorkOrderStatusID is required"
}
```
```json
{
    "msg": "Create failed"
}
```


# Get all workorder list

Get the all registered workorder list.

**URL** : `/api/workorder`

**Method** : `GET`

**Auth required** : `YES`

**Header**  : `Authorization:{jwt-token}`


** Success Response: **

**Code** : `200 success`

* Resonse example 


```json
{
    "msg": "WorkOrder list found!",
    "data": [
        {
            "_id": "5f6a6f90d9741d152c754178",
            "intPriorityID": 11,
            "intWorkOrderStatusID": 22,
            "intSiteID": 33,
            "intRequestedByUserID": null,
            "strEmailUserGuest": "",
            "dtmDateCreated": "",
            "dtmDateCompleted": "",
            "intCompletedByUserID": null,
            "strDescription": "",
            "strNameUserGuest": "",
            "dtmSuggestedCompletionDate": "",
            "strPhoneUserGuest": "",
            "strCode": "",
            "strCompletionNotes": "",
            "intMaintenanceTypeID": null,
            "dtmDateLastModified": "",
            "strAdminNotes": "",
            "intRCAActionID": null,
            "intRCACauseID": null,
            "intRCAProblemID": null,
            "__v": 0
        },
        ...
    ]
}
```

** Error Responses: **

**Code** : `401 Unauthorized`

**Condition** : Missing or incorrect authentication credentials and expired one.

* Resonse example 

```json
{
    "msg": "JWT token varified failed!",
    "data":null
}
```

```json
{
    "msg": "JWT token expired!",
    "data":null
}
```
**Condition** : Internal Server Error.

**Code** : `500`

* Resonse example 

```json
{
    "msg": "Internal Server error."
}
```

# Get Single WorkOrder By Id

Get a single Workorder by id if current workorder was registered on it.

**URL** : `/api/workorder/:Id`

**Method** : `GET`

**Auth required** : `YES`

**Header** : `Authorization:{jwt-token}`

**URL Parameters** :  An integer that uniquely identifies the workorder.

** Success Response: **

**Code** : `200 success`

* Resonse example 


```json
{
    "msg": "Workorder found!",
    "data": 
        {
            "_id": "5f6896897b9884253cf6bdb6",
            "strAssignedUserIds":" 13 8 9 "
            "intPriorityID": 4156,
            "intWorkOrderStatusID": 4,
            "strAssets":"ASSET ABC (0010), ASSET DEF (0011)"
            "intSiteID": 3345,
             "strAssignedUsers": "John Doe, Samuel Smith",
            "intRequestedByUserID": 667, 
            strEmailUserGuest:"",
            dtmDateCreated:"",
            strAssetIds:" 9 78 675 ",
            dtmDateCompleted:"",
            intCompletedByUserID:555
            ...
        }
}
```

** Error Responses: **

**Code** : `401 Unauthorized`

**Condition** : Missing or incorrect authentication credentials and expired one.

* Resonse example 

```json
{
    "msg": "JWT token varified failed!",
    "data":null
}
```

```json
{
    "msg": "JWT token expired!",
    "data":null
}
```

** Or **

**Condition** : If workorder does not exist on server.

**Code** : `404 Not Found`

* Content example 

```json
{
   "msg": "WorkOrder not found", 
   "data":null
}
```

# Update WorkOrder

Update the WorkOrder by Id

**URL** : `/api/workorder/:Id`

**Method** : `PUT`

**Auth required** : `YES`

**Header** : `Authorization:{jwt-token}`

**URL Parameters** :  An integer that uniquely identifies the workorder.

| Param       | Type     | Description     | 
| :------------- |  :----------- |----------- |
|  intPriorityID |  Integer    | The ID of the priority level of the task. For getting possible values, please refer to the Priority section.|
|  intWorkOrderStatusID |  Integer    | The ID of the current status of the work order. For possible values, please refer to the WorkOrderStatus section.|
|  intSiteID |  Integer    | For multi-sites tenants, the ID of the site the work order is related to. A site is an asset itself, so for possible values, please refer to the Asset section.|
|  intRequestedByUserID |  Integer    | The ID of the user who requested the work order. For getting possible values, please refer to the User section.|
|  strEmailUserGuest |  String    | Work orders can be requested by guests without having to log into the CMMS. In this case, this field gives the email address of the person who submitted the work order.|
|  dtmDateCreated |  timestamp    | The date and time when the work order was created.|
|  dtmDateCompleted |  timestamp    | The date and time when the work order was completed.|
|  intCompletedByUserID |  Integer    |The ID of the user who requested the work order.|
|  strDescription |  String    |A short text describing the work order.|
|  strNameUserGuest |  String    |Work orders can be requested by guests without having to log into the CMMS. In this case, this field gives the name of the person who submitted the work order.|
|  dtmSuggestedCompletionDate |  timestamp    |The date and time when the work order should be completed.|
|  strPhoneUserGuest |  String    |Work orders can be requested by guests without having to log into the CMMS. In this case, this field gives the phone number of the person who submitted the work order.|
|  strCode |  String    |An unique code for referencing the work order. Work order codes are automatically generated by the CMMS. For example : `"2009-02-05.0004.00004"`.|
|  strCompletionNotes |  String    |This field can be used to input some notes upon the completion of the work order.|
|  intMaintenanceTypeID |  Integer    |An ID referring to the maintenance type of the work order.|
|  dtmDateLastModified |  timestamp    |The date and time when the work order was modified for the last time.|
|  strAdminNotes |  String    |This field can be used by the administrator to input some notes upon the completion of the work order.|
|  intRCAActionID |  Integer    |For Enterprise tenants only. An ID that indicates the action/solution for a problem code. Problems, causes, and actions must be configured in the tenant to use this field.|
|  intRCACauseID |  Integer    |For Enterprise tenants only. An ID that indicates the root cause for a problem code. Problems, causes, and actions must be configured in the tenant to use this field.|
|  intRCAProblemID |  Integer    |For Enterprise tenants only. An ID that indicates the root cause for a problem code on a specific asset or asset category. Problems, causes, and actions must be configured in the tenant to use this field.|

* Data example 

```json
{
    "intPriorityID": 556,
    "strDescription": "example of strDescription",
    "strNameUserGuest": "str_Name_User_Guest",
    "strPhoneUserGuest": "str_PhoneUser_Guest",
    "strCode":"2019-12-05.0004.00004"
    ... ...
}
```
** Success Response: **

**Code** : `200 success`

* Resonse example

```json
{
   "msg": "WorkOrder updated successfully!"
    }
```

** Error Responses: ** 

**Code** : `401 Unauthorized`

**Condition** : Missing or incorrect authentication credentials and expired one.

* Resonse example 

```json
{
    "msg": "JWT token varified failed!",
    "data":null
}
```

```json
{
    "msg": "JWT token expired!",
    "data":null
}
```

**Condition** : If fields are missed or put the wrong type of value.

**Code** : `400 BAD REQUEST`

* Content example 

```json
{
    "msg": "update failed"
}
```

# Delete WorkOrder

Delete a WorkOrder by Id

**URL** : `/api/workorder/:Id`

**Method** : `DELETE`

**Auth required** : `YES`

**Header** : `Authorization:{jwt-token}`

**URL Parameters** :  An integer that uniquely identifies the workorder.

** Success Response:**

**Code** : `200 success`

* Resonse example 

```json
{
    "msg": "Workorder deleted successfully!",
    data: null
}
```

** Error Responses: **

**Code** : `401 Unauthorized`

**Condition** : Missing or incorrect authentication credentials and expired one.

* Resonse example 

```json
{
    "msg": "JWT token varified failed!",
    "data":null
}
```

```json
{
    "msg": "JWT token expired!",
    "data":null
}
```

**Condition** : If there was no asset available to delete.

**Code** : `400 BAD REQUEST`

* Content example 

```json
{
    "msg": "Delete failed",
    "data":null
}
```
